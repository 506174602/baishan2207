<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promise方法-catch</title>
</head>

<body>
    <script>
        /**
         * catch() 当promise实例的状态被改为 rejected 时,该方法会被调用, 其参数
         * 仍然是一个 函数
         * rejected状态的来源:
         * -- reject()
         * -- 程序执行报错
         * -- 手动抛出错误
         */
        const p1 = new Promise((resolve, reject) => {
            // console.log(aa) // aa不存在
            throw new Error('手动抛出错误')
        })

        p1.catch((err) => {
            console.log('catch----', err)
        })
        console.log('p1----', p1)

        // 常用写法
        const p2 = new Promise((resolve, reject) => {
            reject()
        }).then((data) => {
            console.log('成功时, 被执行', data)
        }).then((data) => {
            console.log('成功时, 被执行', data)
        }).then((data) => {
            console.log('成功时, 被执行', data)
        }).catch((err) => {
            console.log('有错误时, 被执行')
        }).finally(() => {
            // finally() 在 promise 链结束后调用, 无论成功还是失败,都会执行
            // 可在此代码块中做一些清理工作
            console.log('最终执行的操作')
        })
    </script>
</body>

</html>